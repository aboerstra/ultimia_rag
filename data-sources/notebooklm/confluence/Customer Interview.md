# Customer Interview

*Source: Confluence | Page ID: 3899064333*
*Last Updated: 2025-06-13T19:51:18.700Z by Laura Dolphin*

---

<ac:image ac:align="center" ac:layout="center" ac:original-height="250" ac:original-width="1495" ac:custom-width="true" ac:alt="image-20250613-195115.png" ac:width="760"><ri:attachment ri:filename="image-20250613-195115.png" ri:version-at-save="1" /></ac:image><p /><ac:image ac:align="center" ac:layout="center" ac:original-height="612" ac:original-width="1422" ac:custom-width="true" ac:alt="image-20250613-195026.png" ac:width="760"><ri:attachment ri:filename="image-20250613-195026.png" ri:version-at-save="1" /></ac:image><p /><h3>üìò Summary</h3><p><strong>Main Purpose:</strong> Build a form to collect and store Customer Interview information tied to an Opportunity. At the same time, keep related data in sync (Contact, Account, Vehicle, Opportunity) by updating fields.</p><h3><strong>Plain Language Breakdown of What the Apex Class Does</strong></h3><p>This Apex controller is used with a <strong>Visualforce Page</strong> to:</p><ol start="1"><li><p><strong>Display Opportunity-related data</strong> (like Opportunity, Account, Contact, and Vehicle data).</p></li><li><p><strong>Create</strong> a new <strong>Customer Interview</strong> (<code>Customer_Interview__c</code>) record.</p></li><li><p><strong>Update</strong> related information on:</p><ul><li><p><strong>Opportunity</strong></p></li><li><p><strong>Vehicle</strong> (<code>Vehicles__c</code>)</p></li><li><p><strong>Primary Contact</strong></p></li><li><p><strong>Account</strong></p></li></ul></li></ol><h4>üí° Flow of Execution:</h4><ul><li><p>When the controller is initialized, it fetches an Opportunity (and related data including the vehicle, contact, account).</p></li><li><p>If the vehicle or contact details are missing, it stops with an error.</p></li><li><p>When the user <strong>saves</strong> the interview (through <code>save()</code> or <code>saveExit()</code> methods):</p><ul><li><p>A new <code>Customer_Interview__c</code> record is created with data from the related Opportunity, Contact, Account, and Vehicle.</p></li><li><p>The following are UPDATED:</p><ul><li><p><strong>Opportunity</strong> fields</p></li><li><p><strong>Vehicle</strong> fields</p></li><li><p><strong>Primary Contact</strong> fields</p></li><li><p><strong>Account</strong> <code>Tax_ID__c</code></p></li></ul></li><li><p>Changes are saved and either redirected back to the Opportunity or another page.</p></li></ul></li></ul><hr /><h3>‚úÖ List of <strong>Opportunity Fields</strong> UPDATED or INSERTED by the Class</h3><p>Here are all the Opportunity fields that are either <strong>inserted into</strong> the <code>CustomerInterview</code> object or <strong>updated</strong> in Salesforce directly:</p><table data-table-width="760" data-layout="default" ac:local-id="3a082ab2-cbb6-4c3d-99ba-ac77d227379f"><tbody><tr><th><p>Opportunity Field (API Name)</p></th><th><p>Action</p></th></tr><tr><td><p><code>Equipment_Garaging_Street__c</code></p></td><td><p>Read &amp; Update</p></td></tr><tr><td><p><code>Equipment_Garaging_City__c</code></p></td><td><p>Read &amp; Update</p></td></tr><tr><td><p><code>Equipment_Garaging_State__c</code></p></td><td><p>Read &amp; Update</p></td></tr><tr><td><p><code>Equipment_Garaging_Zip__c</code></p></td><td><p>Read &amp; Update</p></td></tr><tr><td><p><code>Name</code></p></td><td><p>Read</p></td></tr><tr><td><p><code>Married__c</code></p></td><td><p>Read &amp; Update</p></td></tr><tr><td><p><code>TIB__c</code></p></td><td><p>Read &amp; Update</p></td></tr><tr><td><p><code>Down_Payment__c</code></p></td><td><p>Read</p></td></tr><tr><td><p><code>of_Vehicles_in_the_Fleet__c</code></p></td><td><p>Read</p></td></tr><tr><td><p><code>First_Payment_Date__c</code></p></td><td><p>Read &amp; Update</p></td></tr><tr><td><p><code>Payment_Date__c</code></p></td><td><p>Read &amp; Update</p></td></tr><tr><td><p><code>CALCAP__c</code></p></td><td><p>Read &amp; Update</p></td></tr><tr><td><p><code>Warranty_Remarks__c</code></p></td><td><p>Read</p></td></tr><tr><td><p><code>Sales_Tax_Treatment_Remarks__c</code></p></td><td><p>Read &amp; Update</p></td></tr><tr><td><p><code>Years_as_a_Howeowner__c</code></p></td><td><p>Read &amp; Update</p></td></tr><tr><td><p><code>of_Res_Moves_in_the_Last_5_Years__c</code></p></td><td><p>Read &amp; Update</p></td></tr><tr><td><p><code>Years_with_a_CDL__c</code></p></td><td><p>Read &amp; Update</p></td></tr><tr><td><p><code>Years_as_an_Owner_Operator__c</code></p></td><td><p>Read &amp; Update</p></td></tr><tr><td><p><code>Number_of_Vehicles__c</code></p></td><td><p>Read &amp; Update</p></td></tr><tr><td><p><code>Account_Number__c</code></p></td><td><p>Read</p></td></tr><tr><td><p><code>Dealer__c</code></p></td><td><p>Read</p></td></tr><tr><td><p><code>Broker__c</code></p></td><td><p>Read</p></td></tr><tr><td><p><code>Bank_Account_Number__c</code></p></td><td><p>Read &amp; Update</p></td></tr><tr><td><p><code>Bank_Routing_Number__c</code></p></td><td><p>Read &amp; Update</p></td></tr><tr><td><p><code>PMT_Block_1__c</code></p></td><td><p>Read</p></td></tr><tr><td><p><code>PMT_Block_2__c</code></p></td><td><p>Read</p></td></tr><tr><td><p><code>PMT_Block_3__c</code></p></td><td><p>Read</p></td></tr><tr><td><p><code>Term_Block_1__c</code></p></td><td><p>Read</p></td></tr><tr><td><p><code>Term_Block_2__c</code></p></td><td><p>Read</p></td></tr><tr><td><p><code>Term_Block_3__c</code></p></td><td><p>Read</p></td></tr><tr><td><p><code>Contract_Type__c</code></p></td><td><p>Read</p></td></tr><tr><td><p><code>Auto_ACH__c</code></p></td><td><p>Read &amp; Update</p></td></tr></tbody></table><hr /><h3>üîÅ Additional Objects Affected:</h3><ul><li><p><strong>Contact</strong> (Only Primary Contact, via <code>OpportunityContactRole</code>):</p><ul><li><p>Fields: <code>SSN__c</code>, <code>Phone</code>, <code>MobilePhone</code>, <code>Email</code>, <code>FirstName</code>, <code>LastName</code></p></li></ul></li><li><p><strong>Account</strong>:</p><ul><li><p>Field: <code>Tax_ID__c</code></p></li></ul></li><li><p><strong>Vehicles__c</strong>:</p><ul><li><p>Fields: <code>Warranty__c</code>, <code>Warranty_Type__c</code>, <code>Warranty_Term__c</code>, <code>Warranty_Miles__c</code>, <code>Mileage__c</code></p></li></ul></li><li><p><strong>Customer_Interview__c</strong>:</p><ul><li><p>This is custom and receives data from all the above.</p></li></ul></li></ul><hr />